@%@UCRWARNING=# @%@

@!@
import univention.lib.ucrLogrotate

for name in ('smbd', 'nmbd'):
	settings = univention.lib.ucrLogrotate.getLogrotateConfig(name, configRegistry)
	print "/var/log/samba/log.%s {" % name
	for setting in settings.keys():
		print "\t%s" % settings[setting]
	print "\tpostrotate"
#smdb does not handle SYSHUP correct at the moment, so smb.conf has to be reloaded in a different way.
        if name == 'smbd':
                print "\t\t/usr/bin/smbcontrol all reload-config"
        else:
                print "\t\t/usr/bin/killall -HUP /usr/sbin/%s" % name
	print "\tendscript"
	print "}"
@!@
